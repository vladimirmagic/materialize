
<!--  Scripts-->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="bin/materialize.js"></script>
<script src="docs/js/init.js"></script>
<script>
    const svgSprite = document.createElement('div');
	svgSprite.id = 'svg-sprite';
	document.body.append(svgSprite);
	fetch('dist/defs/svg/sprite.defs.svg', {
		// cache: 'force-cache',
	})
		.then(response => response.text())
		.then(html => svgSprite.innerHTML = html);

	document.addEventListener('DOMContentLoaded', () => {

		// CHECKOUT
		const addressForm = document.querySelector('.order__shipping-address-add');
		const addressFormButtonOpen = document.querySelector('.order__address-form-button-open');
		const addressFormButtonClose = document.querySelector('.order__address-form-button-close');
		if (addressForm && addressFormButtonOpen && addressFormButtonClose) {
			addressFormButtonOpen.addEventListener('click', () => {
				addressForm.classList.add('order__shipping-address-add--opened');
			});
			addressFormButtonClose.addEventListener('click', () => {
				addressForm.classList.remove('order__shipping-address-add--opened');
				addressForm.scrollIntoView({behavior: 'smooth', block: 'nearest'});
			});
		}

		const orderSteps = document.querySelectorAll('.order-step');
		if (orderSteps && orderSteps.length) orderSteps.forEach(orderStep => {
			if (orderStep.dataset && orderStep.dataset.step) {
				orderStep.addEventListener('click', () => {
					alert('Go to step ' + orderStep.dataset.step);
				});
			}
		});

		const paymentsPlans = document.querySelectorAll('input[name="order-payments-plan"]');
		if (paymentsPlans && paymentsPlans.length) {
			paymentsPlans.forEach(paymentsPlan => {
				if (paymentsPlan.dataset && paymentsPlan.dataset.tab) {
					paymentsPlan.addEventListener('change', () => {
						const container = paymentsPlan.closest('.checkout-payments-plan');
						if (container) {
							const paymentsPlanTabs = container.querySelectorAll('.payments-plan-tab');
							if (paymentsPlanTabs && paymentsPlanTabs.length) {
								paymentsPlanTabs.forEach(paymentsPlanTab => paymentsPlanTab.style.display = 'none');
								const paymentsPlanTab = document.querySelector(paymentsPlan.dataset.tab);
								if (paymentsPlanTab) paymentsPlanTab.style.display = 'block';
							}
						}
					});
				}
			});
		}

		const paymentsPlansChecked = document.querySelectorAll('.order__step-radio--payments-plan input:checked');
		if (paymentsPlansChecked && paymentsPlansChecked.length) {
			paymentsPlansChecked.forEach(paymentsPlan => {
				if (paymentsPlan.dataset && paymentsPlan.dataset.tab) {
					const paymentsPlanTab = document.querySelector(paymentsPlan.dataset.tab);
					if (paymentsPlanTab) paymentsPlanTab.style.display = 'block';
				}
			});
		}

		// BILLING ADDRESS
		const billingAddressCheckbox = document.querySelector('input[name="checkout-billing-address"]');
		const billingAddressForm = document.querySelector('.checkout-billing-address-form');
		function checkoutBillingAddress () {
			billingAddressForm.style.display = billingAddressCheckbox.checked ? 'none' : 'block';
		}
		if (billingAddressCheckbox && billingAddressForm) {
			billingAddressCheckbox.addEventListener('change', checkoutBillingAddress);
			checkoutBillingAddress();
		}

		// RESALE CERTIFICATE
		const resaleСertificateCheckbox = document.querySelector('input[name="checkout-resale-certificate"]');
		const resaleСertificateForm = document.querySelector('.checkout-resale-certificate-form');
		function checkoutResaleСertificate () {
			resaleСertificateForm.style.display = resaleСertificateCheckbox.checked ? 'block' : 'none';
		}
		if (resaleСertificateCheckbox && resaleСertificateForm) {
			resaleСertificateCheckbox.addEventListener('change', checkoutResaleСertificate);
			checkoutResaleСertificate();
		}
		
	});
</script>